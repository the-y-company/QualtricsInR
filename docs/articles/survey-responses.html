<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Survey Reponses • QualtricsInR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Survey Reponses">
<meta property="og:description" content="QualtricsInR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">QualtricsInR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Surveys
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/survey-responses.html">Exporting responses</a>
    </li>
    <li>
      <a href="../articles/surveys.html">Basic survey manipulations</a>
    </li>
    <li>
      <a href="../articles/survey-objects.html">Survey structure</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Distribution and Contacts
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/distributions.html">Survey distributions</a>
    </li>
    <li>
      <a href="../articles/research-core-contacts.html">Mailing lists</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Libraries
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/research-core-contacts.html">Contacts</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Brand Administration
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/divisions.html">Divisions</a>
    </li>
    <li>
      <a href="../articles/groups.html">Groups</a>
    </li>
    <li>
      <a href="../articles/users.html">Users</a>
    </li>
    <li>
      <a href="../articles/data-privacy.html">Data privacy</a>
    </li>
    <li>
      <a href="../articles/audit.html">Audit</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    References
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../reference/">All Functions</a>
    </li>
    <li>
      <a href="../articles/progress_table.html">Progress</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ppssphysics/QualtricsInR">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="survey-responses_files/header-attrs-2.7/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Survey Reponses</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ppssphysics/QualtricsInR/blob/master/vignettes/survey-responses.Rmd"><code>vignettes/survey-responses.Rmd</code></a></small>
      <div class="hidden name"><code>survey-responses.Rmd</code></div>

    </div>

    
    
<p>In addition of providing a standard method for exporting the responses of a survey, <a href="https://github.com/ppssphysics/QualtricsInR">QualtricsInR</a> provides an useful method for efficiently handling the download of multiple surveys.</p>
<p>The process to retrieve survey data requires 3 steps: 1) request the data from Qualtrics, 2) wait while the data is being prepared, 3) download the data (more information can be found <a href="https://api.qualtrics.com/docs/getting-survey-responses-new">here</a>). It may therefore be more efficient, when downloading responses from multiple surveys to 1) request the downloads 2) download the prepared files once they are ready.</p>
<div id="finding-your-survey-id" class="section level2">
<h2 class="hasAnchor">
<a href="#finding-your-survey-id" class="anchor"></a>Finding your Survey Id</h2>
<p>You can always find the id of one of your surveys by logging into your Qualtrics account and inspecting the URL when previewing your survey or inspect your Qualtrics IDs account page. Through the API, it is however straightforward to list all the surveys available in your account:</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="co"># retrieve all available survey ids from your account</span>
<span class="kw">lst_surveys</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/list_surveys.html">list_surveys</a></span>()
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="kw">lst_surveys</span>)
<span class="co">#&gt; # A tibble: 9 × 6</span>
<span class="co">#&gt;   id                 name       ownerId    lastModified   creationDate  isActive</span>
<span class="co">#&gt;   &lt;chr&gt;              &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;chr&gt;         &lt;lgl&gt;   </span>
<span class="co">#&gt; 1 SV_39rgGREdlmzH63X api_copy_… UR_1Z96ys… 2020-06-11T08… 2020-06-10T0… TRUE    </span>
<span class="co">#&gt; 2 SV_3fmfHkdddhnRbKJ api_copy_… UR_1Z96ys… 2020-06-11T08… 2020-06-11T0… FALSE   </span>
<span class="co">#&gt; 3 SV_6WpcSqtVBsibNcN api_copy_… UR_1Z96ys… 2020-06-11T08… 2020-06-11T0… FALSE   </span>
<span class="co">#&gt; 4 SV_9Ak7vCha9W42Twp api_copy_… UR_1Z96ys… 2020-06-11T08… 2020-06-11T0… FALSE   </span>
<span class="co">#&gt; 5 SV_aYwagyEbamVLpFX api_copy_… UR_1Z96ys… 2020-06-11T08… 2020-06-11T0… FALSE   </span>
<span class="co">#&gt; 6 SV_blW4HuzdeqLiTJ3 api_expor… UR_1Z96ys… 2020-04-16T18… 2020-04-16T1… TRUE    </span>
<span class="co">#&gt; 7 SV_cScDRSV5hsN3YEd api_distr… UR_1Z96ys… 2020-06-10T08… 2020-04-16T0… TRUE    </span>
<span class="co">#&gt; 8 SV_elpspu2EuJXLEWx api_expor… UR_1Z96ys… 2020-04-16T18… 2020-04-16T1… TRUE    </span>
<span class="co">#&gt; 9 SV_esXQqpyoyNFeW69 api_copy_… UR_1Z96ys… 2020-06-11T08… 2020-06-11T0… FALSE</span>
</pre></div>
</div>
<div id="survey-response-status" class="section level2">
<h2 class="hasAnchor">
<a href="#survey-response-status" class="anchor"></a>Survey Response Status</h2>
<p>Rather than exporting the full set of responses from a survey, you might only be interested in checking the current status of total responses:</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="fu"><a href="../reference/get_survey_response_counts.html">get_survey_response_counts</a></span>(<span class="st">"SV_elpspu2EuJXLEWx"</span>)
<span class="co">#&gt; $auditable</span>
<span class="co">#&gt; [1] 3</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $generated</span>
<span class="co">#&gt; [1] 0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $deleted</span>
<span class="co">#&gt; [1] 0</span>
</pre></div>
<p>The call returns a list with 3 elements corresponding to the valid survey responses (‘auditable’), the responses that were generated or deleted.</p>
</div>
<div id="standard-export-method" class="section level2">
<h2 class="hasAnchor">
<a href="#standard-export-method" class="anchor"></a>Standard Export Method</h2>
<p>You can export the responses from your survey using the <code><a href="../reference/get_survey_responses.html">get_survey_responses()</a></code> function. To retrieve the id of your survey, you can use the <code>list_surveys</code> function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="co"># export survey responses</span>
<span class="fu"><a href="../reference/get_survey_responses.html">get_survey_responses</a></span>(<span class="st">"SV_cScDRSV5hsN3YEd"</span>)
<span class="co">#&gt; # A tibble: 3 × 19</span>
<span class="co">#&gt;   StartDate    EndDate     Status IPAddress  Progress `Duration (in se… Finished</span>
<span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;             &lt;chr&gt;   </span>
<span class="co">#&gt; 1 2020-04-16 … 2020-04-16… 0      86.220.39… 100      5                 1       </span>
<span class="co">#&gt; 2 2020-04-16 … 2020-04-16… 0      86.220.39… 100      10                1       </span>
<span class="co">#&gt; 3 2020-04-16 … 2020-04-16… 0      86.220.39… 100      13                1       </span>
<span class="co">#&gt; # … with 12 more variables: RecordedDate &lt;chr&gt;, ResponseId &lt;chr&gt;,</span>
<span class="co">#&gt; #   RecipientLastName &lt;chr&gt;, RecipientFirstName &lt;chr&gt;, RecipientEmail &lt;chr&gt;,</span>
<span class="co">#&gt; #   ExternalReference &lt;chr&gt;, LocationLatitude &lt;chr&gt;, LocationLongitude &lt;chr&gt;,</span>
<span class="co">#&gt; #   DistributionChannel &lt;chr&gt;, UserLanguage &lt;chr&gt;, Q1 &lt;chr&gt;, Q2 &lt;chr&gt;</span>
</pre></div>
<p>By default, the data is not saved on disk. You can save your data in a desired location by using the <em>saveDir</em> argument.</p>
<pre><code><a href="../reference/get_survey_responses.html">get_survey_responses("SV_cScDRSV5hsN3YEd", format = "csv", saveDir = "./data/", filename = "test_survey")</a></code></pre>
<p>The default file format is json but csv and tsv can be passed. We currently don’t provide the SPSS file format as an output option. The file is automatically named with the survey id if the parameter <em>filename</em> is not specified.</p>
<p>A number of <a href="https://api.qualtrics.com/api-reference/reference/responseImportsExports.json/paths/~1surveys~1%7BsurveyId%7D~1export-responses/post">optional parameters</a> can be passed to the function. Be aware that any download that exceeds 1.8 GB will need to be split in several exports using different time intervals (dates specifications follow the ISO 8601 standard YYYY-MM-DD (more information <a href="https://api.qualtrics.com/docs/dates-and-times">here</a>). For example:</p>
<pre><code><a href="../reference/get_survey_responses.html">get_survey_responses(
  "SV_cScDRSV5hsN3YEd", 
  format = "csv", 
  startDate = "2020-04-01T07:31:43Z", 
  endDate = "2020-04-29T07:31:43Z")</a></code></pre>
<p>Instead of exporting the recode value for the answer choices, you can export the text of the answer choice by setting the parameter <em>useLabels</em> to TRUE:</p>
<pre><code><a href="../reference/get_survey_responses.html">get_survey_responses(
  "SV_cScDRSV5hsN3YEd", 
  format = "csv", 
  useLabels = TRUE)</a></code></pre>
</div>
<div id="retrieving-responses-for-multiple-surveys" class="section level2">
<h2 class="hasAnchor">
<a href="#retrieving-responses-for-multiple-surveys" class="anchor"></a>Retrieving Responses for Multiple Surveys</h2>
<p>If you need to download responses from multiple surveys or you have a need to schedule regular automated exports of multiple survey responses, we recommend you use the approach documented below. Instead of looping over each survey, requesting the export and downloading the file from the Qualtrics server, we will send the request to Qualtrics to prepare all the files and then export them.</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="co"># request creation of response exports</span>
<span class="kw">requests</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bulk-download.html">request_downloads</a></span>(<span class="kw">lst_surveys</span><span class="op">$</span><span class="kw">id</span>, format = <span class="st">"csv"</span>)
<span class="kw">requests</span>
<span class="co">#&gt; Download Requests:</span>
<span class="co">#&gt;  ✔ 9  Successful</span>
<span class="co">#&gt;  ✖ 0  Unsuccessful</span>
<span class="co"># download the response files</span>
<span class="kw">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bulk-download.html">download_requested</a></span>(<span class="kw">requests</span>)
<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="kw">data</span>)
<span class="co">#&gt; [1] 9</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="kw">data</span>[[<span class="fl">1</span>]])
<span class="co">#&gt; # A tibble: 1 × 19</span>
<span class="co">#&gt;   StartDate     EndDate    Status IPAddress Progress `Duration (in sec… Finished</span>
<span class="co">#&gt;   &lt;chr&gt;         &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;              &lt;chr&gt;   </span>
<span class="co">#&gt; 1 2020-06-10 1… 2020-06-1… 1      &lt;NA&gt;      100      2                  1       </span>
<span class="co">#&gt; # … with 12 more variables: RecordedDate &lt;chr&gt;, ResponseId &lt;chr&gt;,</span>
<span class="co">#&gt; #   RecipientLastName &lt;chr&gt;, RecipientFirstName &lt;chr&gt;, RecipientEmail &lt;chr&gt;,</span>
<span class="co">#&gt; #   ExternalReference &lt;chr&gt;, LocationLatitude &lt;chr&gt;, LocationLongitude &lt;chr&gt;,</span>
<span class="co">#&gt; #   DistributionChannel &lt;chr&gt;, UserLanguage &lt;chr&gt;, Q1 &lt;chr&gt;, Q2 &lt;chr&gt;</span>
</pre></div>
<p>The download will return a list with each element containing the responses for each individual survey.</p>
<p>The implementation takes into account the rate limit imposed by Qualtrics for this specific call. Once the limit is attained in looping accross the different survey ids, the procedure waits a few seconds before trying again. You can set the parameter <em>retryOnRateLimit</em> to FALSE and the procedure will stop upon the first error returned by Qualtrics.</p>
</div>
<div id="downloading-responses-in-progress" class="section level2">
<h2 class="hasAnchor">
<a href="#downloading-responses-in-progress" class="anchor"></a>Downloading Responses In Progress</h2>
<p>One useful functionality is the ability to retrieve a survey’s in progress responses.</p>
<pre><code><a href="../reference/get_survey_responses.html"># for one specific survey
get_survey_responses(survids$id[16], format = "csv", exportResponsesInProgress = TRUE)
# looping on multiple survey ids
request_downloads(survids$id[1:5], format = "csv", exportResponsesInProgress = TRUE)</a></code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Pierre Souter.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
