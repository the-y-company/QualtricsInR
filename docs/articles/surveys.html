<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basic survey manipulations • QualtricsInR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Basic survey manipulations">
<meta property="og:description" content="QualtricsInR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">QualtricsInR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Surveys
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/survey-responses.html">Exporting responses</a>
    </li>
    <li>
      <a href="../articles/surveys.html">Basic survey manipulations</a>
    </li>
    <li>
      <a href="../articles/survey-objects.html">Survey structure</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Distribution and Contacts
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/distributions.html">Survey distributions</a>
    </li>
    <li>
      <a href="../articles/research-core-contacts.html">Mailing lists</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Libraries
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/research-core-contacts.html">Contacts</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Brand Administration
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/divisions.html">Divisions</a>
    </li>
    <li>
      <a href="../articles/groups.html">Groups</a>
    </li>
    <li>
      <a href="../articles/users.html">Users</a>
    </li>
    <li>
      <a href="../articles/data-privacy.html">Data privacy</a>
    </li>
    <li>
      <a href="../articles/audit.html">Audit</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    References
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../reference/">All Functions</a>
    </li>
    <li>
      <a href="../articles/progress_table.html">Progress</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ppssphysics/QualtricsInR">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="surveys_files/header-attrs-2.7/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Basic survey manipulations</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ppssphysics/QualtricsInR/blob/master/vignettes/surveys.Rmd"><code>vignettes/surveys.Rmd</code></a></small>
      <div class="hidden name"><code>surveys.Rmd</code></div>

    </div>

    
    
<p>Using the Qualtrics API, you can peform a number of manipulations of survey objects in your Qualtrics account.</p>
<p>You can easily retrieve the full list of surveys available in your account:</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw">surveys</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/list_surveys.html">list_surveys</a></span>()
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="kw">surveys</span>)
<span class="co">#&gt; # A tibble: 6 x 6</span>
<span class="co">#&gt;   id          name          ownerId     lastModified    creationDate    isActive</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;           &lt;chr&gt;           &lt;lgl&gt;   </span>
<span class="co">#&gt; 1 SV_39rgGRE… api_copy_demo UR_1Z96ysD… 2020-06-11T08:… 2020-06-10T08:… TRUE    </span>
<span class="co">#&gt; 2 SV_3fmfHkd… api_copy_dem… UR_1Z96ysD… 2020-06-11T08:… 2020-06-11T08:… FALSE   </span>
<span class="co">#&gt; 3 SV_6WpcSqt… api_copy_dem… UR_1Z96ysD… 2020-06-11T08:… 2020-06-11T08:… FALSE   </span>
<span class="co">#&gt; 4 SV_9Ak7vCh… api_copy_dem… UR_1Z96ysD… 2020-06-11T08:… 2020-06-11T08:… FALSE   </span>
<span class="co">#&gt; 5 SV_aYwagyE… api_copy_dem… UR_1Z96ysD… 2020-06-11T08:… 2020-06-11T08:… FALSE   </span>
<span class="co">#&gt; 6 SV_blW4Huz… api_export_r… UR_1Z96ysD… 2020-04-16T18:… 2020-04-16T18:… TRUE</span>
</pre></div>
<p>Using a survey id, you can retrieve the survey object from your account:</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="kw">srv_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_survey.html">get_survey</a></span>(<span class="kw">surveys</span><span class="op">$</span><span class="kw">id</span>[<span class="fl">1</span>])
</pre></div>
<p>The call returns a list that provides a number of information related to the status of the survey, providing a quick and efficient way to see the number of survey responses for example, instead of going through the more time consuming process of exporting all survey responses through <code><a href="../reference/get_survey_responses.html">get_survey_responses()</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="kw">srv_obj</span>)
<span class="co">#&gt;  [1] "QuestionCount" "SurveyOptions" "SurveyID"      "SurveyName"   </span>
<span class="co">#&gt;  [5] "SurveyStatus"  "LastModified"  "BrandID"       "OwnerID"      </span>
<span class="co">#&gt;  [9] "LastAccessed"  "CreatorID"     "LastActivated" "Questions"    </span>
<span class="co">#&gt; [13] "Blocks"        "ResponseSets"  "SurveyFlow"    "Scoring"      </span>
<span class="co">#&gt; [17] "ProjectInfo"   "BrandBaseURL"</span>
</pre></div>
<p>A small number of survey options can be easily updated through the below. These include: the survey name, the activity status, the time range and the owner id.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="co"># set status to active</span>
<span class="fu"><a href="../reference/update_survey.html">update_survey</a></span>(<span class="kw">surveys</span><span class="op">$</span><span class="kw">id</span>[<span class="fl">1</span>], status = <span class="fl">TRUE</span>)
<span class="co"># set time range</span>
<span class="fu"><a href="../reference/update_survey.html">update_survey</a></span>(<span class="kw">surveys</span><span class="op">$</span><span class="kw">id</span>[<span class="fl">1</span>], expiration = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"2016-01-01T01:00:00Z"</span>,<span class="st">"2016-03-01T01:00:00Z"</span>))
</pre></div>
<p>An exhaustive list of survey options are configurable through the <code>update_options()</code> call.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="fu">update_options</span>(<span class="kw">surveys</span><span class="op">$</span><span class="kw">id</span>[<span class="fl">1</span>], <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"BackButton"</span> = <span class="kw">true</span>, <span class="st">"BallotBoxStuffingPrevention"</span> = <span class="kw">true</span>))
</pre></div>
<p>All available options can be found in the <a href="https://api.qualtrics.com/reference#update-options">documention</a>.</p>
<div id="copying-and-sharing-surveys" class="section level2">
<h2 class="hasAnchor">
<a href="#copying-and-sharing-surveys" class="anchor"></a>Copying and sharing surveys</h2>
<p>You can create a copy of a survey in your own account or in another user’s account using the user id (if you are a brand administrator, see <code><a href="../reference/list_users.html">list_users()</a></code>):</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="co"># Copy a survey in your own account</span>
<span class="fu"><a href="../reference/copy_survey.html">copy_survey</a></span>(<span class="kw">survey_id</span>, <span class="st">"New_Copy"</span>)
<span class="co"># Copy a survey to another user's account</span>
<span class="fu"><a href="../reference/copy_survey.html">copy_survey</a></span>(<span class="kw">survey_id</span>, <span class="st">"New_Copy"</span>, <span class="kw">user_id</span>)
</pre></div>
<p>The survey id of the new copy will be returned.</p>
<p>You might not want to copy a survey into another person’s account but would rather share the project defining a specific set of permissions. By default, without any specification, your project will be shared with all permissions disabled. You can decide which permissions to enable by providing an array of numbers indicating the permissions you want to enable.</p>
<p>The available options are listed below:</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="st">"1"</span><span class="op">=</span><span class="st">"copySurveyQuestions"</span>
<span class="st">"2"</span><span class="op">=</span><span class="st">"editSurveyFlow"</span>
<span class="st">"3"</span><span class="op">=</span><span class="st">"useBlocks"</span>
<span class="st">"4"</span><span class="op">=</span><span class="st">"useSkipLogic"</span>
<span class="st">"5"</span><span class="op">=</span><span class="st">"useConjoint"</span>
<span class="st">"6"</span><span class="op">=</span><span class="st">"useTriggers"</span>
<span class="st">"7"</span><span class="op">=</span><span class="st">"useQuotas"</span>
<span class="st">"8"</span><span class="op">=</span><span class="st">"setSurveyOptions"</span>
<span class="st">"9"</span><span class="op">=</span><span class="st">"editQuestions"</span>
<span class="st">"10"</span><span class="op">=</span><span class="st">"deleteSurveyQuestions"</span>
<span class="st">"11"</span><span class="op">=</span><span class="st">"editSurveys"</span>
<span class="st">"12"</span><span class="op">=</span><span class="st">"activateSurveys"</span>
<span class="st">"13"</span><span class="op">=</span><span class="st">"deactivateSurveys"</span>
<span class="st">"14"</span><span class="op">=</span><span class="st">"copySurveys"</span>
<span class="st">"15"</span><span class="op">=</span><span class="st">"distributeSurveys"</span>
<span class="st">"16"</span><span class="op">=</span><span class="st">"deleteSurveys"</span>
<span class="st">"17"</span><span class="op">=</span><span class="st">"translateSurveys"</span>
<span class="st">"18"</span><span class="op">=</span><span class="st">"editSurveyResponses"</span>
<span class="st">"19"</span><span class="op">=</span><span class="st">"createResponseSets"</span>
<span class="st">"20"</span><span class="op">=</span><span class="st">"viewResponseId"</span>
<span class="st">"21"</span><span class="op">=</span><span class="st">"useCrossTabs"</span>
<span class="st">"22"</span><span class="op">=</span><span class="st">"downloadSurveyResults"</span>
<span class="st">"23"</span><span class="op">=</span><span class="st">"viewSurveyResults"</span>
<span class="st">"24"</span><span class="op">=</span><span class="st">"filterSurveyResults"</span>
<span class="st">"25"</span><span class="op">=</span><span class="st">"viewPersonalData"</span>
</pre></div>
<p>As an example, to share the survey with only distribution rights enabled, you run the following call:</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="fu"><a href="../reference/share_survey.html">share_survey</a></span>(<span class="kw">my_surveys</span>[<span class="fl">1</span>], <span class="kw">user_id</span>, <span class="fl">15</span>)
</pre></div>
<p>Previous calls are overridden by any new permissions setting so you must set every permission each time. To add permissions to visualize the data, do:</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="co"># enable permissions for distribution and data visualisation</span>
<span class="fu"><a href="../reference/share_survey.html">share_survey</a></span>(<span class="kw">my_surveys</span>[<span class="fl">1</span>], <span class="kw">user_id</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">15</span>,<span class="fl">23</span>))
<span class="co"># remove permission to visualize the data</span>
<span class="fu"><a href="../reference/share_survey.html">share_survey</a></span>(<span class="kw">my_surveys</span>[<span class="fl">1</span>], <span class="kw">user_id</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">15</span>))
</pre></div>
</div>
<div id="importing-a-survey" class="section level2">
<h2 class="hasAnchor">
<a href="#importing-a-survey" class="anchor"></a>Importing a survey</h2>
<p>You can import a local survey file into Qualtrics. The accepted file formats are <em>qsf</em>, <em>txt</em> and <em>doc</em> (word document). The <em>qsf</em> format stands for <em>qualtrics survey file</em> and is usually a file exported from Qualtrics. This is however nothing else than json that is not impossible to build from scratch (be ready to sweat though).</p>
<p>The file can be imported from a local path or directly from a url:</p>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="co"># Import a local qsf file into Qualtrics</span>
<span class="fu"><a href="../reference/import_survey.html">import_survey</a></span>(<span class="st">"name"</span>, <span class="st">"./survey.qsf"</span>, <span class="fl">1</span>)
<span class="co"># Import a file from a url</span>
<span class="fu"><a href="../reference/import_survey.html">import_survey</a></span>(<span class="st">"name"</span>, <span class="st">"https://www.example.com/mysurvey.qsf"</span>, <span class="fl">1</span>)
</pre></div>
</div>
<div id="languages-and-translations" class="section level2">
<h2 class="hasAnchor">
<a href="#languages-and-translations" class="anchor"></a>Languages and Translations</h2>
<p>You can check the languages currently enabled for the survey with <code>get_survey_languages</code>. You can update available languages, for example adding Spanish and Portuguese to the base english survey:</p>
<div class="sourceCode" id="cb11"><pre class="downlit">
<span class="fu"><a href="../reference/update_survey_languages.html">update_survey_languages</a></span>(<span class="st">"SV_1873930DS2"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"EN"</span>, <span class="st">"ES"</span>, <span class="st">"PT"</span>))
</pre></div>
<p>You can retrieve a given translation, which will return a list of all survey textual items that can be translated.</p>
<div class="sourceCode" id="cb12"><pre class="downlit">
<span class="kw">srv_transl_pt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_survey_translations.html">get_survey_translations</a></span>(<span class="st">"SV_1873930DS2"</span>, <span class="st">"PT"</span>)
</pre></div>
<p>This can be useful if you want to handle your translation process outide of Qualtrics. Provide you keep the item references and struture of the list untouched, you will thn be able to update the survey translation back into Qualtrics:</p>
<div class="sourceCode" id="cb13"><pre class="downlit">
<span class="fu"><a href="../reference/update_survey_translations.html">update_survey_translations</a></span>(<span class="kw">id</span>, <span class="st">"PT"</span>, <span class="kw">srv_transl_pt</span>)
</pre></div>
<p>Another compelling use case is to export different languages from multiple clones of a survey and import it back into the master version.</p>
</div>
<div id="manipulating-survey-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#manipulating-survey-objects" class="anchor"></a>Manipulating Survey Objects</h2>
<p>The Qualtrics API provides a number of functionalities to interact directly with a survey’s internal structure. There is the possiblity to intereact with:</p>
<ul>
<li>Questions</li>
<li>Flows</li>
<li>Blocks</li>
<li>Survey Options</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Pierre Souter.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
